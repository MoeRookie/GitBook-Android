# 使用

* ##### 1. 解决在主线程更新UI的需求
* ##### 2. HttpURLConnection类的使用可参考此实现的网络请求部分

```java
...
public class MainActivity extends AppCompatActivity {
    private static final String TAG = MainActivity.class.getSimpleName();

    private EditText mEtPath;
    private TextView mTvResult;
    // 在主线程中定义handler
    private Handler mHandler = new Handler(){
        // 此方法将在主线程中执行
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            String content = (String) msg.obj;
            // 故可以在主线程中更新UI了
            // [2.11]将内容展示到textView上
            mTvResult.setText(content);
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.e(TAG, "sn_code = " + Build.SERIAL);
        // [1]找到我们关心的控件
        mEtPath = findViewById(R.id.et_path);
        mTvResult = findViewById(R.id.tv_result);
    }

    /**
     * [2]点击按钮查看指定路径的源码
     * @param view
     */
    public void search(View view) {
        // [2.1]获取源码路径
        final String path = mEtPath.getText().toString().trim();
        // [2.2]创建子线程,访问网络
        new Thread(){
            @Override
            public void run() {
                super.run();
                try {
                    // [2.2]创建URL对象(指定我们要访问的网址[路径])
                    URL url = new URL(path);
                    // [2.3]拿到urlConnection(用于发送或接收数据)
                    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                    // [2.4]设置发送get请求(默认就是get请求[所以可以不写])
                    connection.setRequestMethod("GET");
                    // [2.5]设置请求超时时间
                    connection.setConnectTimeout(5000);
                    // [2.6]获取服务器返回的状态码
                    int code = connection.getResponseCode();
                    // [2.7]若code==200则说明请求成功
                    if (code == 200) {
                        // [2.8]获取服务器返回的数据(以流的形式返回[流->字符串是一个非常常见的操作,故抽出工具类实现])
                        InputStream is = connection.getInputStream();
                        // [2.9]is->string
                        String content = StreamUtils.streamToString(is);
                        Log.e("MainActivity", "content = " + content);
                        // [2.10]创建并发送消息到系统
                        Message msg = new Message();
                        msg.obj = content;
                        // 拿着我们创建的handler助手告诉系统-我要更新UI
                        // 把数据放到msg中
                        mHandler.sendMessage(msg);
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }.start();
    }
}
```

### 使用步骤

* ##### 1、

# 原理



